// Datastar v1.0.0-RC.9
var ft=/ðŸ–•JS_DSðŸš€/.source,Me=ft.slice(0,5),re=ft.slice(4),O="datastar",pt="Datastar-Request",dt=1e3,mt="type module",gt=!1,yt=!1,vt=!0,qe="morph",ht="inner",bt="outer",Et="prepend",St="append",Tt="before",xt="after",At="upsertAttributes",Rt=qe,me="datastar-merge-fragments",ge="datastar-merge-signals",je="datastar-remove-fragments",Ue="datastar-remove-signals",ye="datastar-execute-script";var X=e=>e.trim()==="true",G=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([a-z])([0-9]+)/gi,"$1-$2").replace(/([0-9]+)([a-z])/gi,"$1-$2").toLowerCase(),ve=e=>G(e).replace(/-./g,t=>t[1].toUpperCase()),he=e=>G(e).replace(/-/g,"_"),zn=e=>ve(e).replace(/^./,t=>t[0].toUpperCase()),Mt=e=>Function(`return Object.assign({}, ${e})`)(),J=e=>e.startsWith("$")?e.slice(1):e,Xn={kebab:G,snake:he,pascal:zn};function F(e,t){for(let n of t.get("case")||[]){let r=Xn[n];r&&(e=r(e))}return e}var Jn="computed",wt={type:"attribute",name:Jn,keyReq:"must",valReq:"must",isExpr:!0,onLoad:({key:e,mods:t,genRX:n,computed:r,batch:s})=>{e=F(e,t);let{deps:a,rxFn:o}=n();s(()=>{r(a,o,e)})}};var q=`${O}-signal-change`;var De=new Set,Ce=new Set,be=new Set;function Pe(e){De.clear(),Ce.clear(),be.clear();let t=e();return(De.size||Ce.size||be.size)&&document.dispatchEvent(new CustomEvent(q,{detail:{added:[...De],removed:[...Ce],updated:[...be]}})),t}var I=[],Q=new Map;function se(){return I}function ze(e){return Q.get(e)}function Qn(e){let t=[],n=0,r=I.length-1,s=a=>a!==e&&!a.startsWith(`${e}.`);for(;n<=r;){let a=Math.floor((n+r)/2),o=I[a];if(o<e)n=a+1;else if(o>e)r=a-1;else{let i=a;do{let c=I[i];if(s(c))break;i--}while(i>=0);let l=a;do{let c=I[l];if(s(c))break;l++}while(l<I.length);for(let c=i+1;c<l;c++)t.push(I[c]);return t}}return t}function Ct(e,t){Xe(e),I.push(e),Q.set(e,t),I.sort((n,r)=>r.length-n.length),De.add(e)}function _(e,t){let n=Q.get(e);n?Je(n)&&(n.value=t):Ee(t,e)}function ie(e){return Q.get(e)?.value}function oe(e,t){let n=!1,r=Q.get(e);return r||(n=!0,r=Ee(t,e)),{dep:r,inserted:n}}function ke(e,t=!1){let n=Ft(e);for(let[r,s]of Object.entries(n))Q.has(r)&&t||_(r,s)}function Xe(...e){for(let t of e){let n=Qn(t);for(let r of n){Q.delete(r);let s=I.indexOf(r);s>-1&&I.splice(s,1),Ce?.add(r)}}}function Ne(e=!0,t=!1){return JSON.stringify(Yn(t),null,e?2:0)}function Yn(e,...t){let n=new Map;for(let s of I)if(!(e&&s.match(/^_|\._/))){if(t.length>0){let a=!1;for(let o of t)if(s.startsWith(o)){a=!0;break}if(!a)continue}n.set(s,Q.get(s)?.value)}return er(n)}function Zn(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ft(e,t=[],n="."){return Object.keys(e).reduce((r,s)=>Object.assign({},r,Zn(e[s])?Ft(e[s],t.concat([s]),n):{[t.concat([s]).join(n)]:e[s]}),{})}function er(e,t="."){let n={};for(let[r,s]of e.entries()){let a=r.split(t),o=n;for(let i=0;i<a.length-1;i++){let l=a[i];o[l]||(o[l]={}),o=o[l]}o[a[a.length-1]]=s}return n}function Lt(e,t,n,...r){return Pe(()=>e(...r,...n.map((s,a)=>t[a]?s:s.value)))}var Fe=[],Ke=[],we=0,Be=0,tr=(e,t)=>t(e[0].value),nr=(e,t)=>t(e[0].value,e[1].value),rr=(e,t)=>t(e[0].value,e[1].value,e[2].value),sr=(e,t)=>t(e[0].value,e[1].value,e[2].value,e[3].value),ir=(e,t,n)=>{for(let r=0;r<n;r++)Fe[n][r]=e[r].value;return t(...Fe[n])};function Pt(e,t){let n=e.length;return n===0?t:n===1?tr.bind(null,e,t):n===2?nr.bind(null,e,t):n===3?rr.bind(null,e,t):n===4?sr.bind(null,e,t):(Fe[n]||(Fe[n]=Array(n)),ir.bind(null,e,t,n))}function Je(e){return e.type==="signal"}function Qe(e){return e.type==="computed"}function Ee(e,t){let n={type:"signal",path:t,previousValue:e,_value:e,flags:1};return Object.defineProperty(n,"value",{get:or.bind(n),set:ar.bind(n)}),t&&Ct(t,n),n}function Ye(e,t,n){let r={type:"computed",path:n,flags:17,getter:Pt(e,t)};Object.defineProperty(r,"value",{get:lr.bind(r)});for(let s of e)It(s,r);return n&&Ct(n,r),r}function Ze(e,t){let n={type:"effect",fn:Pt(e,t),flags:2};for(let r of e)It(r,n);return n.fn(),cr.bind(n)}function or(){let e=this._value;if(this.flags&16&&Nt(this,e)){let t=this.subs;t&&Le(t)}return e}function ar(e){if(this._value!==(this._value=e)){this.path&&be.add(this.path),this.flags=17;let t=this.subs;if(t){let n=t,r=n.nextSub,s;e:do{let a=n.sub,o=a.flags;if(o&3&&(o&60?o&12?o&4?!(o&48)&&Wt(n,a)?(a.flags=o|40,o&=1):o=0:a.flags=o&-9|32:o=0:a.flags=o|32,o&2&&Ot(a),o&1&&Qe(a))){let i=a.subs;if(i){n=i,i.nextSub&&(s={value:r,prev:s},r=n.nextSub);continue}}if(n=r){r=n.nextSub;continue}for(;s;)if(n=s.value,s=s.prev,n){r=n.nextSub;continue e}break}while(!0);for(;we<Be;){let a=Ke[we];Ke[we++]=void 0,Vt(a,a.flags&=-65)}we=0,Be=0}}}function lr(){let e=this.flags;if(e&16||e&32&&_t(this.deps,this)){if(kt(this)){let t=this.subs;t&&Le(t)}}else e&32&&(this.flags=e&-33);return this._value}function cr(){let e=this.deps;for(;e;)e=Ht(e,this);this.flags=0}function kt(e){$t(e);try{return e._value!==(e._value=e.getter())?(e.path&&be.add(e.path),!0):!1}finally{Gt(e)}}function Nt(e,t){return e.flags=1,e.previousValue!==(e.previousValue=t)}function Dt(e){return Qe(e)?kt(e):Nt(e,e._value)}function Ot(e){let t=e.flags;t&64||(e.flags=t|64,Ke[Be++]=e)}function Vt(e,t){if(t&16||t&32&&_t(e.deps,e)){$t(e);try{e.fn()}finally{Gt(e)}return}t&32&&(e.flags=t&-33);let n=e.deps;for(;n;){let r=n.dep,s=r.flags;s&64&&Vt(r,r.flags=s&-65),n=n.nextDep}}function It(e,t){let n=t.depsTail;if(n&&n.dep===e)return;let r,s=t.flags&4;if(s&&(r=n?n.nextDep:t.deps,r&&r.dep===e)){t.depsTail=r;return}let a=e.subsTail;if(a&&a.sub===t&&(!s||Wt(a,t)))return;let o=t.depsTail=e.subsTail={dep:e,sub:t,prevDep:n,nextDep:r,prevSub:a,nextSub:void 0};r&&(r.prevDep=o),n?n.nextDep=o:t.deps=o,a?a.nextSub=o:e.subs=o}function Ht(e,t=e.sub){let n=e.dep,r=e.prevDep,s=e.nextDep,a=e.nextSub,o=e.prevSub;if(s?s.prevDep=r:t.depsTail=r,r?r.nextDep=s:t.deps=s,a?a.prevSub=o:n.subsTail=o,o)o.nextSub=a;else if((n.subs=a)===void 0&&Qe(n)){let i=n.deps;if(i){n.flags=17;do i=Ht(i,n);while(i)}}return s}function $t(e){e.depsTail=void 0,e.flags=e.flags&-57|4}function Gt(e){e.flags&=-5}function _t(e,t){let n,r=0;e:do{let s=e.dep,a=s.flags,o=!1;if(t.flags&16)o=!0;else if((a&17)===17){if(Dt(s)){let i=s.subs;i.nextSub&&Le(i),o=!0}}else if((a&33)===33){(e.nextSub||e.prevSub)&&(n={value:e,prev:n});let i=s;e=i.deps,t=i,++r;continue}if(!o&&e.nextDep){e=e.nextDep;continue}for(;r;){--r;let i=t,l=i.subs,c=l.nextSub;if(c?(e=n.value,n=n.prev):e=l,o){if(Dt(i)){c&&Le(l),t=e.sub;continue}}else t.flags&=-33;if(t=e.sub,e.nextDep){e=e.nextDep;continue e}o=!1}return o}while(!0)}function Le(e){do{let t=e.sub,n=e.nextSub,r=t.flags;(r&48)===32&&(t.flags=r|16,r&2&&Ot(t)),e=n}while(e)}function Wt(e,t){let n=t.depsTail;if(n){let r=t.deps;do{if(r===e)return!0;if(r===n)break;r=r.nextDep}while(r)}return!1}var qt={type:"attribute",name:"signals",isExpr:!0,onLoad:e=>{let{key:t,mods:n,value:r,genRX:s,evalRX:a,batch:o}=e,{deps:i,dm:l,rxFn:c}=s(),u=n.has("ifmissing");if(t!==""){let f=F(t,n),m=r===""?r:a(c,l,i);o(()=>{u?oe(f,m):_(f,m)})}else{let f=a(c,l,i);o(()=>{ke(f,u)})}}};function Oe(e){return e instanceof HTMLElement||e instanceof SVGElement}function ae(e,t){let n=Y?`data-${Y}-ignore`:"data-ignore",r=`${n}__self`;if(!Oe(e)||e.closest(`[${n}]`))return;let s=document.createTreeWalker(e,1);for(;e;){if(Oe(e)){if(e.hasAttribute(n)){e=s.nextSibling();continue}e.hasAttribute(r)||t(e)}e=s.nextNode()}}var ur="https://data-star.dev/errors";function jt(e,t,n={}){let r=new Error;r.name=`${O} ${e} error`;let s=he(t),a=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),o=JSON.stringify(n,null,2);return r.message=`${t}
More info: ${ur}/${e}/${s}?${a}
Context: ${o}`,r}function H(e,t,n={}){let r={plugin:{name:t.plugin.name,type:t.plugin.type}};return jt("init",e,Object.assign(r,n))}function b(e,t,n={}){let r={plugin:{name:t.plugin.name,type:t.plugin.type},element:{id:t.el.id,tag:t.el.tagName},expression:{rawKey:t.rawKey,key:t.key,value:t.value,validSignals:se(),fnContent:t.fnContent}};return jt("runtime",e,Object.assign(r,n))}var Se={},tt=[],le=new Map,et=null,Y="";function Ut(e){Y=e}function Ve(...e){for(let t of e){let n={plugin:t,actions:Se,removals:le,applyToElement:Ie,batch:Pe,signal:Ee,computed:Ye,effect:Ze},r=t.type;if(r==="action")Se[t.name]=t;else if(r==="attribute")tt.push(t),t.onGlobalInit?.(n);else if(r==="watcher")t.onGlobalInit?.(n);else throw H("InvalidPluginType",n)}tt.sort((t,n)=>{let r=n.name.length-t.name.length;return r!==0?r:t.name.localeCompare(n.name)})}function nt(){queueMicrotask(()=>{ae(document.documentElement,Ie),et||(et=new MutationObserver(fr),et.observe(document.body,{subtree:!0,childList:!0,attributes:!0}))})}function fr(e){let t=new Set;for(let{target:r,type:s,addedNodes:a,removedNodes:o}of e)switch(s){case"childList":{for(let i of o)ae(i,l=>{let c=le.get(l);if(le.delete(l)){for(let u of c.values())u();c.clear()}});for(let i of a)ae(i,l=>t.add(l))}break;case"attributes":{if(!Oe(r)||r.closest(`[${Y?`data-${Y}-ignore`:"data-ignore"}]`))continue;t.add(r);break}}let n=Array.from(t);n.sort((r,s)=>r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1);for(let r of n)Ie(r)}function Kt(e){let t=5831,n=e.length;for(;n--;)t+=(t<<5)+e.charCodeAt(n);return(t>>>0).toString(36)}function Ie(e){let t=[],n=le.get(e)||new Map,r=new Map(n);for(let[s,a]of Object.entries(e.dataset)){if(!s.startsWith(Y))continue;let o=Kt(`${s}${a}`);r.delete(o)||t.push({key:s,value:a,hash:o})}for(let[s,a]of r)a(),n.delete(s);for(let{key:s,value:a,hash:o}of t){let i=pr(e,s,a);i&&n.set(o,i)}n.size&&le.set(e,n)}function pr(e,t,n){let r=ve(t.slice(Y.length)),s=tt.find(m=>RegExp(`^${m.name}([A-Z]|_|$)`).test(r));if(!s)return;let[a,...o]=r.slice(s.name.length).split(/\_\_+/),i=!!a;i&&(a=ve(a));let l=!!n,c={applyToElement:Ie,actions:Se,removals:le,genRX:()=>dr(c,...s.argNames||[]),plugin:s,el:e,rawKey:r,key:a,value:n,mods:new Map,batch:Pe,signal:Ee,computed:Ye,effect:Ze,evalRX:Lt},u=s.keyReq||"allowed";if(i){if(u==="denied")throw b(`${s.name}KeyNotAllowed`,c)}else if(u==="must")throw b(`${s.name}KeyRequired`,c);let f=s.valReq||"allowed";if(l){if(f==="denied")throw b(`${s.name}ValueNotAllowed`,c)}else if(f==="must")throw b(`${s.name}ValueRequired`,c);if(u==="exclusive"||f==="exclusive"){if(i&&l)throw b(`${s.name}KeyAndValueProvided`,c);if(!i&&!l)throw b(`${s.name}KeyOrValueRequired`,c)}for(let m of o){let[h,...p]=m.split(".");c.mods.set(ve(h),new Set(p.map(y=>y.toLowerCase())))}return s.onLoad(c)||(()=>{})}function dr(e,...t){let n=[],r=new Set,s="";if(e.plugin.isExpr){let p=/(\/(\\\/|[^\/])*\/|"(\\"|[^\"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|\(\s*((function)\s*\(\s*\)|(\(\s*\))\s*=>)\s*(?:\{[\s\S]*?\}|[^;)\{]*)\s*\)\s*\(\s*\)|[^;])+/gm,y=e.value.trim().match(p);if(y){let E=y.length-1,w=y[E].trim();w.startsWith("return")||(y[E]=`return (${w});`),s=y.join(`;
`)}}else s=e.value.trim();let a=new Map,o=RegExp(`(?:${Me})(.*?)(?:${re})`,"gm");for(let p of s.matchAll(o)){let y=p[1],E=`dsEscaped${Kt(y)}`;a.set(E,y),s=s.replace(Me+y+re,E)}let i=(p,y)=>`${p}${he(y).replaceAll(/\./g,"_")}`,l=new Set(t),c=se();if(c.length){let p=c.join("|"),y=RegExp(`\\$(${p})(\\s*[+&^\\/*|-]?=[^=]|\\+\\+|--)`,"gm"),E=[...s.matchAll(y)],w=(k,T,x="")=>{let L=RegExp(`\\$${k[1]}(?!\\w)`,"gm");s=s.replaceAll(L,T+x)};if(E.length){let k=`${O}Mut_`,T=new Set;for(let x of E){let L=x[1],d=ze(L),A=i(k,L);d&&!T.has(d)&&(r.add(d),T.add(d),n.push(!0),l.add(A)),w(x,A,".value")}}let D=RegExp(`\\$(${p})(\\W|$)`,"gm"),C=[...s.matchAll(D)];if(C.length){let k=`${O}Pure_`,T=new Set;for(let x of C){let L=x[1],d=ze(L),A=i(k,L);d&&!T.has(d)&&(r.add(d),T.add(d),n.push(!1),l.add(A)),w(x,A)}}}let u=new Set,f=RegExp(`@(${Object.keys(Se).join("|")})\\(`,"gm"),m=[...s.matchAll(f)],h=new Set;if(m.length){let p=`${O}Act_`;for(let y of m){let E=y[1],w=Se[E];if(!w)continue;u.add(E);let D=i(p,E);l.add(D),s=s.replace(`@${E}(`,`${D}(`),h.add((...C)=>w.fn(e,...C))}}for(let[p,y]of a)s=s.replace(p,y);e.fnContent=s;try{let p=Function("el",...l,s);return{dm:n,deps:[...r],rxFn:(...y)=>{try{return p(e.el,...y,...h)}catch(E){throw b("ExecuteExpression",e,{error:E.message})}}}}catch(p){throw b("GenerateExpression",e,{error:p.message})}}Ve(qt,wt);var Z=`${O}-sse`,He="started",$e="finished",Bt="error",zt="retrying",Xt="retrying";function j(e,t){document.addEventListener(Z,n=>{if(n.detail.type!==e)return;let{argsRaw:r}=n.detail;t(r)})}function te(e,t,n){document.dispatchEvent(new CustomEvent(Z,{detail:{type:e,el:t,argsRaw:n}}))}var Jt=e=>`${e}`.includes("text/event-stream"),Qt=e=>e==="GET",en="text/event-stream",tn="text/html",nn="application/json",rn="application/javascript",mr=[en,tn,nn,rn],U=async(e,t,n,r)=>{let{el:s,evt:a}=e,{headers:o,contentType:i,includeLocal:l,excludeSignals:c,selector:u,openWhenHidden:f,retryInterval:m,retryScaler:h,retryMaxWaitMs:p,retryMaxCount:y,abort:E}=Object.assign({headers:{},contentType:"json",includeLocal:!1,excludeSignals:!1,selector:null,openWhenHidden:!1,retryInterval:dt,retryScaler:2,retryMaxWaitMs:3e4,retryMaxCount:10,abort:void 0},r),w=t.toLowerCase(),D=()=>{};try{if(!n?.length)throw b("SseNoUrlProvided",e,{action:w});let C={Accept:mr.join(", ")};C[pt]=!0,i==="json"&&(C["Content-Type"]="application/json");let k=Object.assign({},C,o),T={method:t,headers:k,openWhenHidden:f,retryInterval:m,retryScaler:h,retryMaxWaitMs:p,retryMaxCount:y,signal:E,onopen:async d=>{if(d.status>=400){let A=d.status.toString();te(Bt,s,{status:A})}},onmessage:d=>{if(!d.event.startsWith(O))return;let A=d.event,P={},W=d.data.split(`
`);for(let v of W){let R=v.indexOf(" "),S=v.slice(0,R),M=P[S];M||(M=[],P[S]=M);let V=v.slice(R+1);M.push(V)}let g={};for(let[v,R]of Object.entries(P))g[v]=R.join(`
`);te(A,s,g)},onerror:d=>{if(Jt(d))throw b("InvalidContentType",e,{url:n});d&&(console.error(d.message),te(zt,s,{message:d.message}))}},x=new URL(n,window.location.href),L=new URLSearchParams(x.search);if(i==="json"){if(!c){let d=Ne(!1,!l);Qt(t)?L.set(O,d):T.body=d}}else if(i==="form"){let d=u?document.querySelector(u):s.closest("form");if(d===null)throw u?b("SseFormNotFound",e,{action:w,selector:u}):b("SseClosestFormNotFound",e,{action:w});if(!d.checkValidity()){d.reportValidity(),D();return}let A=new FormData(d),P=s;if(s===d)a instanceof SubmitEvent&&(P=a.submitter);else{let v=R=>R.preventDefault();d.addEventListener("submit",v),D=()=>d.removeEventListener("submit",v)}if(P instanceof HTMLButtonElement){let v=P.getAttribute("name");v&&A.append(v,P.value)}let W=d.getAttribute("enctype")==="multipart/form-data";W||(k["Content-Type"]="application/x-www-form-urlencoded");let g=new URLSearchParams(A);if(Qt(t))for(let[v,R]of g)L.append(v,R);else W?T.body=A:T.body=g}else throw b("SseInvalidContentType",e,{action:w,contentType:i});te(He,s,{}),x.search=L.toString();try{await br(x.toString(),s,T)}catch(d){if(!Jt(d))throw b("SseFetchFailed",e,{method:t,url:n,error:d})}}finally{te($e,s,{}),D()}};async function gr(e,t){let n=e.getReader(),r;for(r=await n.read();!r.done;)t(r.value),r=await n.read()}function yr(e){let t,n,r,s=!1;return function(o){t===void 0?(t=o,n=0,r=-1):t=hr(t,o);let i=t.length,l=0;for(;n<i;){s&&(t[n]===10&&(l=++n),s=!1);let c=-1;for(;n<i&&c===-1;++n)switch(t[n]){case 58:r===-1&&(r=n-l);break;case 13:s=!0;case 10:c=n;break}if(c===-1)break;e(t.subarray(l,c),r),l=n,r=-1}l===i?t=void 0:l!==0&&(t=t.subarray(l),n-=l)}}function vr(e,t,n){let r=Yt(),s=new TextDecoder;return function(o,i){if(o.length===0)n?.(r),r=Yt();else if(i>0){let l=s.decode(o.subarray(0,i)),c=i+(o[i+1]===32?2:1),u=s.decode(o.subarray(c));switch(l){case"data":r.data=r.data?`${r.data}
${u}`:u;break;case"event":r.event=u;break;case"id":e(r.id=u);break;case"retry":{let f=Number.parseInt(u,10);Number.isNaN(f)||t(r.retry=f);break}}}}}function hr(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Yt(){return{data:"",event:"",id:"",retry:void 0}}var Zt="last-event-id";function br(e,t,{signal:n,headers:r,onopen:s,onmessage:a,onclose:o,onerror:i,openWhenHidden:l,fetch:c,retryInterval:u=1e3,retryScaler:f=2,retryMaxWaitMs:m=3e4,retryMaxCount:h=10,overrides:p,...y}){return new Promise((E,w)=>{let D={...r};D.accept||(D.accept=en);let C;function k(){C.abort(),document.hidden||W()}l||document.addEventListener("visibilitychange",k);let T=0;function x(){document.removeEventListener("visibilitychange",k),window.clearTimeout(T),C.abort()}n?.addEventListener("abort",()=>{x(),E()});let L=c??window.fetch,d=s??function(){},A=0,P=u;async function W(){C=new AbortController;try{let g=await L(e,{...y,headers:D,signal:C.signal});A=0,u=P,await d(g);let v=async(S,M,V,N,...Ae)=>{let pe={[V]:await M.text()};for(let de of Ae){let B=`datastar-${G(de)}`,z=M.headers.get(B);if(N){let Re=N[de];Re&&(typeof Re=="string"?z=Re:z=JSON.stringify(Re))}z&&(pe[de]=z)}te(S,t,pe)},R=g.headers.get("Content-Type");if(R?.includes(tn))return await v(me,g,"fragments",p,"selector","mergeMode","useViewTransition");if(R?.includes(nn))return await v(ge,g,"signals",p,"onlyIfMissing","mergeMode","useViewTransition");if(R?.includes(rn))return await v(ye,g,"script",p,"autoRemove","attributes");await gr(g.body,yr(vr(S=>{S?D[Zt]=S:delete D[Zt]},S=>{P=S,u=S},a))),o?.(),x(),E()}catch(g){if(!C.signal.aborted)try{let v=i?.(g)??u;window.clearTimeout(T),T=window.setTimeout(W,v),u*=f,u=Math.min(u,m),A++,A>=h?(te(Xt,t,{}),x(),w("Max retries reached.")):console.error(`Datastar failed to reach ${e.toString()} retrying in ${v}ms.`)}catch(v){x(),w(v)}}}W()})}var sn={type:"action",name:"delete",fn:async(e,t,n)=>U(e,"DELETE",t,{...n})};var on={type:"action",name:"get",fn:async(e,t,n)=>U(e,"GET",t,{...n})};var an={type:"action",name:"patch",fn:async(e,t,n)=>U(e,"PATCH",t,{...n})};var ln={type:"action",name:"post",fn:async(e,t,n)=>U(e,"POST",t,{...n})};var cn={type:"action",name:"put",fn:async(e,t,n)=>U(e,"PUT",t,{...n})};var un={type:"watcher",name:ye,onGlobalInit:async e=>{j(ye,({autoRemove:t=`${vt}`,attributes:n=mt,script:r})=>{let s=X(t);if(!r?.length)throw H("NoScriptProvided",e);let a=document.createElement("script");for(let o of n.split(`
`)){let i=o.indexOf(" "),l=i?o.slice(0,i):o,c=i?o.slice(i):"";a.setAttribute(l.trim(),c.trim())}a.text=r,document.head.appendChild(a),s&&a.remove()})}};var Te=document,xe=!!Te.startViewTransition;function K(e,t){if(t.has("viewtransition")&&xe){let n=e;e=(...r)=>document.startViewTransition(()=>n(...r))}return e}var En="div",rt="value",ot=e=>document.createElement(e),Sn=()=>ot(En),Er=e=>`<${e}></${e}>`,fn=e=>[...e.querySelectorAll("[id]")],Tn=e=>e instanceof Element,pn=e=>e instanceof HTMLTemplateElement,dn=e=>e instanceof HTMLInputElement,mn=e=>e instanceof HTMLTextAreaElement,gn=e=>e instanceof HTMLOptionElement,xn={type:"watcher",name:me,onGlobalInit:async e=>{let t=ot("template");j(me,({fragments:n=Er(En),selector:r="",mergeMode:s=Rt,useViewTransition:a="false"})=>{let o=X(a);t.innerHTML=n.trim();for(let i of[...t.content.children]){if(!Tn(i))throw H("NoFragmentsFound",e);let l=r||`#${i.getAttribute("id")}`,c=document.querySelectorAll(l);if(!c.length)throw H("NoTargetsFound",e,{selectorOrID:l});o&&xe?Te.startViewTransition(()=>yn(e,s,i,c)):yn(e,s,i,c)}})}};function yn(e,t,n,r){for(let s of r){let a=n.cloneNode(!0);switch(t){case qe:{Tr(s,a),ae(s,o=>{let i=e.removals.get(o);if(e.removals.delete(o)){for(let l of i.values())l();i.clear()}e.applyToElement(o)});break}case ht:s.innerHTML=a.outerHTML;break;case bt:s.replaceWith(a);break;case Et:s.prepend(a);break;case St:s.append(a);break;case Tt:s.before(a);break;case xt:s.after(a);break;case At:for(let o of a.getAttributeNames()){let i=a.getAttribute(o);s.setAttribute(o,i)}break;default:throw H("InvalidMergeMode",e,{mergeMode:t})}}}var ue=Sn();ue.hidden=!0;var Ge,$=new Map,ce=new Set,Sr=ue.moveBefore!==void 0;function Tr(e,t){let n=Sn();n.append(t);let r=fn(n),s=fn(e);e.id&&s.push(e);let a=new Set,o=new Map;for(let{id:m,tagName:h}of s)o.has(m)?a.add(m):o.set(m,h);ce.clear();for(let{id:m,tagName:h}of r)ce.has(m)?a.add(m):o.get(m)===h&&ce.add(m);for(let m of a)ce.delete(m);$.clear(),bn(e.parentElement,s),bn(n,r),document.body.insertAdjacentElement("afterend",ue),Ge=e;let i=e.parentNode,l=e.previousSibling,c=e.nextSibling;An(i,n,e,c);let u=[],f=l?.nextSibling||i.firstChild;for(;f&&f!==c;)u.push(f),f=f.nextSibling;return ue.remove(),u}function An(e,t,n=null,r=null){pn(e)&&pn(t)&&(e=e.content,t=t.content),n??=e.firstChild;for(let s of t.childNodes){if(n&&n!==r){let o=xr(s,n,r);if(o){if(o!==n){let i=n;for(;i&&i!==o;){let l=i;i=i.nextSibling,hn(l)}}st(o,s),n=o.nextSibling;continue}}if(Tn(s)&&ce.has(s.id)){let o=s.id,i=`[id="${o}"]`,l=f=>f.querySelector(i),c=Ge.id===o&&Ge||l(Ge)||l(ue),u=c;for(;u=u.parentNode;){let f=$.get(u);f&&(f.delete(c.id),f.size||$.delete(u))}Rn(e,c,n),st(c,s),n=c.nextSibling;continue}if($.has(s)){let o=ot(s.tagName);return e.insertBefore(o,n),st(o,s),o}let a=document.importNode(s,!0);e.insertBefore(a,n)}for(;n&&n!==r;){let s=n;n=n.nextSibling,hn(s)}}function xr(e,t,n){let r=null,s=e.nextSibling,a=0,o=0,i=$.get(e)?.size||0,l=t;for(;l&&l!==n;){if(vn(l,e)){let c=!1,u=$.get(l),f=$.get(e);if(f&&u){for(let m of u)if(f.has(m)){c=!0;break}}if(c)return l;if(!r&&!$.has(l)){if(!i)return l;r=l}}if(o+=$.get(l)?.size||0,o>i||(r===null&&s&&vn(l,s)&&(a++,s=s.nextSibling,a>=2&&(r=void 0)),l.contains(document.activeElement)))break;l=l.nextSibling}return r||null}function vn(e,t){let n=e,r=t;return n.nodeType===r.nodeType&&n.tagName===r.tagName&&(!n.id||n.id===r.id)}function hn(e){$.has(e)?Rn(ue,e,null):e.parentNode?.removeChild(e)}function Rn(e,t,n=null){Sr?e.moveBefore(t,n):e.insertBefore(t,n)}function st(e,t){let n=t.nodeType,r=e,s=t;if(n===1){let a=r.attributes,o=s.attributes;for(let i of o)r.getAttribute(i.name)!==i.value&&r.setAttribute(i.name,i.value);for(let i=a.length-1;0<=i;i--){let l=a[i];l&&(s.hasAttribute(l.name)||r.removeAttribute(l.name))}if(dn(r)&&dn(s)&&s.type!=="file"){let i=s.value,l=r.value;it(r,s,"checked"),it(r,s,"disabled"),Object.keys(s.dataset||{}).some(u=>u.startsWith("bind"))||(s.hasAttribute(rt)?l!==i&&(r.setAttribute(rt,i),r.value=i):(r.value="",r.removeAttribute(rt)))}else if(gn(r)&&gn(s))it(r,s,"selected");else if(mn(r)&&mn(s)){let i=s.value,l=r.value;i!==l&&(r.value=i),r.firstChild&&r.firstChild.nodeValue!==i&&(r.firstChild.nodeValue=i)}}return(n===8||n===3)&&e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue),r.isEqualNode(s)||An(r,s),e}function it(e,t,n){let r=t,s=e,a=r[n],o=s[n];a!==o&&(s[n]=r[n],a?e.setAttribute(n,""):e.removeAttribute(n))}function bn(e,t){for(let n of t)if(ce.has(n.id)){let r=n;for(;r&&r!==e;){let s=$.get(r);s||(s=new Set,$.set(r,s)),s.add(n.id),r=r.parentElement}}}var Mn={type:"watcher",name:ge,onGlobalInit:async({batch:e})=>{j(ge,({signals:t="{}",onlyIfMissing:n=`${yt}`})=>{let r=X(n),s=Mt(t);e(()=>ke(s,r))})}};var wn={type:"watcher",name:je,onGlobalInit:async e=>{j(je,({selector:t,useViewTransition:n=`${gt}`})=>{if(!t.length)throw H("NoSelectorProvided",e);let r=X(n),s=document.querySelectorAll(t),a=()=>{for(let o of s)o.remove()};r&&xe?Te.startViewTransition(()=>a()):a()})}};var Dn={type:"watcher",name:Ue,onGlobalInit:async e=>{let{batch:t}=e;j(Ue,({paths:n=""})=>{let r=n.split(`
`).map(s=>s.trim());if(!r?.length)throw H("NoPathsProvided",e);t(()=>{Xe(...r)})})}};var Cn={type:"attribute",name:"attr",valReq:"must",isExpr:!0,onLoad:({el:e,key:t,genRX:n,computed:r,effect:s})=>{let{deps:a,rxFn:o}=n(),i=(c,u)=>{u===""||u===!0?e.setAttribute(c,""):u===!1||u===null||u===void 0?e.removeAttribute(c):e.setAttribute(c,u)};if(t===""){let c=r(a,o);return s([c],u=>{for(let[f,m]of Object.entries(u))i(f,m)})}t=G(t);let l=r(a,o);return s([l],c=>{i(t,c)})}};var Ar=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,Fn=["change","input","keydown"],Ln={type:"attribute",name:"bind",keyReq:"exclusive",valReq:"exclusive",onLoad:e=>{let{el:t,key:n,mods:r,value:s,effect:a,batch:o}=e,i=t,l=n?F(n,r):J(s),c=t.tagName.toLowerCase(),u=c.includes("input"),f=c.includes("select"),m=t.getAttribute("type"),h=t.hasAttribute("value"),p="",y=u&&m==="checkbox";y&&(i.hasAttribute("checked")?p=h?i.value:!0:p=h?"":!1);let E=u&&m==="number";E&&(p=0);let w=u&&m==="radio";w&&(t.getAttribute("name")?.length||t.setAttribute("name",l));let D=u&&m==="file",{dep:C,inserted:k}=o(()=>oe(l,p)),T=-1;Array.isArray(C.value)&&(t.getAttribute("name")===null&&t.setAttribute("name",l),T=[...document.querySelectorAll(`[name="${l}"]`)].findIndex(g=>g===e.el));let x=T>=0,L=()=>[...ie(l)],d=()=>{let g=ie(l);x&&!f&&(g=g[T]||p);let v=`${g}`;if(y||w)typeof g=="boolean"?i.checked=g:i.checked=v===i.value;else if(f){let R=t;if(R.multiple){if(!x)throw b("BindSelectMultiple",e);for(let S of R.options){if(S?.disabled)continue;let M=E?Number(S.value):S.value;S.selected=g.includes(M)}}else R.value=v}else D||("value"in t?t.value=v:t.setAttribute("value",v))},A=async()=>{let g=ie(l);if(x){let M=g;for(;T>=M.length;)M.push(p);g=M[T]||p}let v=(M,V)=>{let N=V;x&&!f&&!D&&(N=L(),N[T]=V),_(M,N)};if(D){let M=[...i?.files||[]],V=[],N=[],Ae=[];await Promise.all(M.map(pe=>new Promise(de=>{let B=new FileReader;B.onload=()=>{if(typeof B.result!="string")throw b("InvalidFileResultType",e,{resultType:typeof B.result});let z=B.result.match(Ar);if(!z?.groups)throw b("InvalidDataUri",e,{result:B.result});V.push(z.groups.contents),N.push(z.groups.mime),Ae.push(pe.name)},B.onloadend=()=>de(void 0),B.readAsDataURL(pe)}))),o(()=>{v(l,V),v(`${l}Mimes`,N),v(`${l}Names`,Ae)});return}let R=i.value||"",S;if(y){let M=i.checked;h?S=M?R:"":S=M}else if(f){let V=[...t.selectedOptions];x?S=V.filter(N=>N.selected).map(N=>N.value):S=V[0]?.value||p}else typeof g=="boolean"?S=!!R:typeof g=="number"?S=Number(R):S=R||"";o(()=>{v(l,S)})};k&&A();for(let g of Fn)t.addEventListener(g,A);let P=g=>{g.persisted&&A()};window.addEventListener("pageshow",P);let W=a([C],()=>d());return()=>{W();for(let g of Fn)t.removeEventListener(g,A);window.removeEventListener("pageshow",P)}}};var Pn={type:"attribute",name:"class",valReq:"must",isExpr:!0,onLoad:({el:e,key:t,mods:n,genRX:r,computed:s,effect:a})=>{let o=e.classList,{deps:i,rxFn:l}=r(),c=s(i,l);return a([c],u=>{if(t===""){let f=u;for(let[m,h]of Object.entries(f)){let p=m.split(/\s+/);h?o.add(...p):o.remove(...p)}}else{let f=G(t);f=F(f,n),u?o.add(f):o.remove(f)}})}};var kn={type:"attribute",name:"indicator",keyReq:"exclusive",valReq:"exclusive",onLoad:e=>{let{el:t,key:n,mods:r,value:s,batch:a}=e,o=n?F(n,r):J(s),{dep:i}=a(()=>oe(o,!1));if(!Je(i))throw b("not_signal",e,{signalName:o});let l=c=>{let{type:u,el:f}=c.detail;f===t&&a(()=>{switch(u){case He:i.value=!0;break;case $e:i.value=!1;break}})};return document.addEventListener(Z,l),()=>{i.value=!1,document.removeEventListener(Z,l)}}};var Nn={type:"attribute",name:"jsonSignals",keyReq:"denied",valReq:"denied",onLoad:e=>{let{el:t}=e;t instanceof HTMLElement||b("JsonSignalsInvalidElement",e);let n=()=>{t.textContent=Ne(!0)};return n(),document.addEventListener(q,n),()=>{document.removeEventListener(q,n)}}};function ee(e){if(!e||e.size<=0)return 0;for(let t of e){if(t.endsWith("ms"))return Number(t.replace("ms",""));if(t.endsWith("s"))return Number(t.replace("s",""))*1e3;try{return Number.parseFloat(t)}catch{}}return 0}function ne(e,t,n=!1){return e?e.has(t.toLowerCase()):n}function at(e,t){return(...n)=>{setTimeout(()=>{e(...n)},t)}}function Rr(e,t,n=!1,r=!0){let s=0,a=()=>s&&clearTimeout(s);return(...o)=>{a(),n&&!s&&e(...o),s=setTimeout(()=>{r&&e(...o),a()},t)}}function Mr(e,t,n=!0,r=!1){let s=!1;return(...a)=>{s||(n&&e(...a),s=!0,setTimeout(()=>{s=!1,r&&e(...a)},t))}}function fe(e,t){let n=t.get("delay");if(n){let a=ee(n);e=at(e,a)}let r=t.get("debounce");if(r){let a=ee(r),o=ne(r,"leading",!1),i=!ne(r,"notrail",!1);e=Rr(e,a,o,i)}let s=t.get("throttle");if(s){let a=ee(s),o=!ne(s,"noleading",!1),i=ne(s,"trail",!1);e=Mr(e,a,o,i)}return e}var On={type:"attribute",name:"on",keyReq:"must",valReq:"must",argNames:["evt"],onLoad:e=>{let{el:t,key:n,mods:r,genRX:s,evalRX:a}=e,o=t;r.has("window")&&(o=window);let{dm:i,deps:l,rxFn:c}=s(),u=p=>{if(p){if(r.has("prevent")&&p.preventDefault(),r.has("stop")&&p.stopPropagation(),!(p.isTrusted||p instanceof CustomEvent||r.has("trust")))return;e.evt=p}a(c,i,l,p)};u=fe(u,r),u=K(u,r);let f={capture:!1,passive:!1,once:!1};if(r.has("capture")&&(f.capture=!0),r.has("passive")&&(f.passive=!0),r.has("once")&&(f.once=!0),r.has("outside")){o=document;let p=u;u=y=>{let E=y?.target;t.contains(E)||p(y)}}let h=G(n);if(h=F(h,r),(h===Z||h===q)&&(o=document),t instanceof HTMLFormElement&&h==="submit"){let p=u;u=y=>{y?.preventDefault(),p(y)}}return o.addEventListener(h,u,f),()=>{o.removeEventListener(h,u)}}};var lt=new WeakSet,Vn={type:"attribute",name:"onIntersect",keyReq:"denied",onLoad:({el:e,mods:t,genRX:n,evalRX:r})=>{let{dm:s,deps:a,rxFn:o}=n(),i=()=>r(o,s,a);i=fe(i,t),i=K(i,t);let l={threshold:0};t.has("full")?l.threshold=1:t.has("half")&&(l.threshold=.5);let c=new IntersectionObserver(u=>{for(let f of u)f.isIntersecting&&(i(),c&&lt.has(e)&&c.disconnect())},l);return c.observe(e),t.has("once")&&lt.add(e),()=>{t.has("once")||lt.delete(e),c&&(c.disconnect(),c=null)}}};var In={type:"attribute",name:"onInterval",keyReq:"denied",valReq:"must",onLoad:({mods:e,genRX:t,evalRX:n})=>{let{dm:r,deps:s,rxFn:a}=t(),o=()=>n(a,r,s);o=K(o,e);let i=1e3,l=e.get("duration");l&&(i=ee(l),ne(l,"leading",!1)&&o());let c=setInterval(o,i);return()=>{clearInterval(c)}}};var ct=new WeakSet,Hn={type:"attribute",name:"onLoad",keyReq:"denied",valReq:"must",onLoad:({el:e,mods:t,genRX:n,evalRX:r})=>{let{dm:s,deps:a,rxFn:o}=n(),i=()=>r(o,s,a);i=K(i,t);let l=0,c=t.get("delay");return c&&(l=ee(c)),i=at(i,l),ct.has(e)||i(),t.has("once")&&ct.add(e),()=>{t.has("once")||ct.delete(e)}}};function ut(e,t){return t=t.replaceAll(".","\\.").replaceAll("**",re).replaceAll("*","[^\\.]*").replaceAll(re,".*"),RegExp(`^${t}$`).test(e)}function _e(e){let t=[],n=e.split(/\s+/).filter(r=>r!=="");n=n.map(r=>J(r));for(let r of n)for(let s of se())ut(s,r)&&t.push(s);return t}var $n={type:"attribute",name:"onSignalChange",valReq:"must",argNames:["evt"],onLoad:({key:e,mods:t,genRX:n,evalRX:r})=>{let{dm:s,deps:a,rxFn:o}=n(),i=c=>r(o,s,a,c);i=fe(i,t),i=K(i,t);let l=c=>{if(e!==""){let u=F(e,t),{added:f,removed:m,updated:h}=c.detail;if(![...f,...m,...h].some(p=>ut(p,u)))return}i(c)};return document.addEventListener(q,l),()=>{document.removeEventListener(q,l)}}};var Gn={type:"attribute",name:"ref",keyReq:"exclusive",valReq:"exclusive",onLoad:({el:e,key:t,mods:n,value:r,batch:s})=>{let a=t?F(t,n):J(r);s(()=>{_(a,e)})}};var _n="none",Wn="display",qn={type:"attribute",name:"show",keyReq:"denied",valReq:"must",isExpr:!0,onLoad:({el:{style:e},genRX:t,computed:n,effect:r})=>{let{deps:s,rxFn:a}=t(),o=n(s,a);return r([o],async i=>{i?e.display===_n&&e.removeProperty(Wn):e.setProperty(Wn,_n)})}};var jn={type:"attribute",name:"text",keyReq:"denied",valReq:"must",isExpr:!0,onLoad:e=>{let{el:t,genRX:n,computed:r,effect:s}=e,{deps:a,rxFn:o}=n();t instanceof HTMLElement||b("TextInvalidElement",e);let i=r(a,o);return s([i],l=>{t.textContent=`${l}`})}};var Un={type:"action",name:"setAll",fn:({batch:e},t,n)=>{e(()=>{let r=_e(t);for(let s of r)_(s,n)})}};var Kn={type:"action",name:"toggleAll",fn:({batch:e},t)=>{e(()=>{let n=_e(t);for(let r of n)_(r,!ie(r))})}};var We=new WeakMap,Bn={type:"attribute",name:"preserveAttr",valReq:"exclusive",keyReq:"exclusive",onLoad:({el:e,key:t,value:n})=>{let r=t?[t]:n.trim().split(" ");if(We.has(e)){let a=We.get(e);for(let o of r){let i=a[o];i!==void 0?e.setAttribute(o,i):e.removeAttribute(o)}}else{let a={};for(let o of r){let i=e.getAttribute(o);i!==null&&(a[o]=i)}We.set(e,a)}let s=new MutationObserver(a=>{for(let{attributeName:o,target:i}of a){let l=i,c=We.get(l);if(c){let u=o,f=l.getAttribute(u);f!==null?c[u]=f:delete c[u]}}});return s.observe(e,{attributes:!0,attributeFilter:r}),()=>{s&&(s.disconnect(),s=null)}}};Ve(on,ln,cn,an,sn,xn,Mn,wn,Dn,un,Cn,Ln,Pn,kn,Nn,On,Vn,In,Hn,$n,Bn,Gn,qn,jn,Un,Kn);nt();export{nt as apply,Ve as load,Ut as setAlias};
//# sourceMappingURL=datastar.js.map
