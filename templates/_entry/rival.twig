{% extends "_layouts/base" %}

{% block main %}
  {% cache using key 'rival-' ~ entry.id %}
    {% set duelsWithRival = craft.entries()
      .section('duels')
      .relatedTo(entry.id)
      .all() %}

    <section class="page">
      <h1 class="ui-text-lg ui-bold mb-12">üõ°Ô∏è Rival "{{ entry.title }}"</h1>
      <p class="ui-bold mb-2">{{ duelsWithRival|length }} duels</p>
      <ul class="result">
        {% for duel in duelsWithRival %}
          <li>
            {{ include("_components/duel", {
              duel: duel,
            }, withContext = false) }}
          </li>
        {% endfor %}
      </ul>
    </section>
  {% endcache %}
{% endblock %}
